---
title: "Homebrew/install"
categories:
  - script
  - raw.githubusercontent.com
date: 2025-12-31
---

Homebrew is the popular package manager for macOS and Linux. This installer script sets up Homebrew by cloning the official Git repository, creating the necessary directory structure, and configuring PATH. On macOS, it also installs Xcode Command Line Tools if needed. It requires admin permissions and modifies system directories.

<!-- more -->

## Script info

|                  |                                                                                                   |
|------------------|---------------------------------------------------------------------------------------------------|
| **URL**          | `https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh`                              |
| **Invocation**   | `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"` |
| **Total lines**  | 1167                                                                                              |
| **Comments**     | 45 lines                                                                                          |
| **Blank**        | 85 lines                                                                                          |
| **Boilerplate**  | 180 lines (output formatting, colors, usage text, version checks)                                 |
| **Installation** | 857 lines (actual work)                                                                           |

## What does it change?

### Files and folders

On **macOS (Apple Silicon)**:
- Creates `/opt/homebrew` as the main Homebrew prefix
- Creates subdirectories: `bin`, `etc`, `include`, `lib`, `sbin`, `share`, `opt`, `var`, `Cellar`, `Caskroom`, `Frameworks`
- Creates `/opt/homebrew/share/zsh/site-functions` for shell completions
- Creates `~/Library/Caches/Homebrew` for cached downloads
- Creates `/etc/paths.d/homebrew` containing `/opt/homebrew/bin` (system-wide PATH entry)

On **macOS (Intel)**:
- Uses `/usr/local` as the prefix
- Creates `/usr/local/Homebrew` for the repository

On **Linux**:
- Creates `/home/linuxbrew/.linuxbrew` as the prefix
- Creates `~/.cache/Homebrew` for cached downloads

### Downloads

- Clones the Homebrew/brew repository from `https://github.com/Homebrew/brew` using Git
- Optionally clones Homebrew/homebrew-core if `HOMEBREW_NO_INSTALL_FROM_API` is set
- On macOS: downloads Xcode Command Line Tools via `softwareupdate` if not present

### Environment changes

- Suggests adding `eval "$(brew shellenv)"` to shell configuration files:
    - Bash: `~/.bash_profile` (macOS) or `~/.bashrc` (Linux)
    - Zsh: `~/.zprofile` (macOS) or `~/.zshrc` (Linux)
    - Fish: `~/.config/fish/config.fish`
- Creates `/etc/paths.d/homebrew` on macOS ARM to add `/opt/homebrew/bin` to system PATH

### Permissions

- Requires admin permissions on macOS (user must be Administrator)
- Uses admin permissions to:
    - Create and own the Homebrew prefix directory
    - Set directory permissions to 755 (owner read/write/execute, group/others read/execute)
    - Change ownership of directories to current user
    - Install Xcode Command Line Tools (macOS)
    - Create `/etc/paths.d/homebrew` (macOS ARM)
- On Linux: may require admin permissions if installing to `/home/linuxbrew`

### Services

- On macOS: invokes `softwareupdate` and `xcode-select` to install Command Line Tools
- Runs `brew update --force --quiet` after installation

## Notes

- The script refuses to run as root (except in containers)
- Checks for `/etc/homebrew/brew.no_install` file that can block installation
- Validates minimum versions: Git 2.7.0+, curl 7.41.0+, Ruby 3.4+ (Linux), glibc 2.13+ (Linux)
- Enables anonymous analytics by default (can be opted out)
- On macOS ARM, the `/etc/paths.d/homebrew` file affects all users on the system

## Uninstall procedure

Homebrew provides an official uninstall script:

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/uninstall.sh)"
```

Manual removal:
1. Remove Homebrew prefix: `/opt/homebrew` (ARM) or `/usr/local/Homebrew` (Intel) on macOS, `/home/linuxbrew/.linuxbrew` on Linux
2. Remove cache: `~/Library/Caches/Homebrew` (macOS) or `~/.cache/Homebrew` (Linux)
3. Remove PATH entry: `/etc/paths.d/homebrew` (macOS ARM)
4. Remove shell configuration lines with `brew shellenv` from `~/.bash_profile`, `~/.zprofile`, etc.

## Full source

The full script source is saved as [`scripts/raw_githubusercontent_com_Homebrew_install_HEAD_install_sh.txt`](../docs/scripts/raw_githubusercontent_com_Homebrew_install_HEAD_install_sh.txt).
