
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mkdox curlpipebash by pforret">
      
      
      
        <link rel="canonical" href="https://curlpipebash.com/examples/raw.githubusercontent.com.fb/">
      
      
        <link rel="prev" href="../raw.githubusercontent.com.a3/">
      
      
        <link rel="next" href="../sdk.cloud.google.com.5a/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../icon/android-chrome-192x192.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>/nvm-sh/nvm/v0.40.1/install.sh - curl | bash</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nunito";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <!-- your analytics script -->
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nvm-shnvmv0401installsh" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="curl | bash" class="md-header__button md-logo" aria-label="curl | bash" data-md-component="logo">
      
  <img src="../../icon/android-chrome-192x192.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            curl | bash
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              /nvm-sh/nvm/v0.40.1/install.sh
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  curl | bash

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../frankenphp.dev.5a/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="curl | bash" class="md-nav__button md-logo" aria-label="curl | bash" data-md-component="logo">
      
  <img src="../../icon/android-chrome-192x192.png" alt="logo">

    </a>
    curl | bash
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    curl | bash
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About this site
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/features/extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Markdown Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/features/plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installed plugins
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    News
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/content/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Content
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/fake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fake
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../frankenphp.dev.5a/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frankenphp.dev/install.sh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../get.docker.com.ff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    get.docker.com
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install.sandstorm.io.69/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    install.sandstorm.io
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../laravel.build.ce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    laravel.build/example-app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../php.new.d9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    php.new/install/mac/8.4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raw.githubusercontent.com.0c/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    /basherpm/basher/master/install.sh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raw.githubusercontent.com.a3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    /Homebrew/install/HEAD/install.sh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    /nvm-sh/nvm/v0.40.1/install.sh
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    /nvm-sh/nvm/v0.40.1/install.sh
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stats" class="md-nav__link">
    <span class="md-ellipsis">
      Stats
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code" class="md-nav__link">
    <span class="md-ellipsis">
      Code
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdk.cloud.google.com.5a/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk.cloud.google.com
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="nvm-shnvmv0401installsh">/nvm-sh/nvm/v0.40.1/install.sh<a class="headerlink" href="#nvm-shnvmv0401installsh" title="Permanent link">&para;</a></h1>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">&para;</a></h2>
<ul>
<li>run <code>curl -s https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash</code> to install nvm Node Version Manager</li>
<li>cf <a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a> </li>
</ul>
<h2 id="stats">Stats<a class="headerlink" href="#stats" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Bourne Shell                     1             51             52            392
-------------------------------------------------------------------------------
</code></pre></div>
<h2 id="code">Code<a class="headerlink" href="#code" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="ch">#!/usr/bin/env bash</span>

<span class="o">{</span><span class="w"> </span><span class="c1"># this ensures the entire script is downloaded #</span>

nvm_has<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">type</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="o">}</span>

nvm_echo<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span>%s<span class="se">\\</span>n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$*</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null
<span class="o">}</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BASH_VERSION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">ZSH_VERSION</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">  </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;Error: the install instructions explicitly say to pipe the install script to `bash`; please </span>
<span class="s1">follow them&#39;</span>
<span class="w">  </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="k">fi</span>

nvm_grep<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nv">GREP_OPTIONS</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="o">}</span>

nvm_default_install_dir<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span>%s<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.nvm&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span>%s<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span><span class="s2">/nvm&quot;</span>
<span class="o">}</span>

nvm_install_dir<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_DIR</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">printf</span><span class="w"> </span>%s<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>nvm_default_install_dir
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

nvm_latest_version<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;v0.40.1&quot;</span>
<span class="o">}</span>

nvm_profile_is_bash_or_zsh<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>TEST_PROFILE
<span class="w">  </span><span class="nv">TEST_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="k">in</span>
<span class="w">    </span>*<span class="s2">&quot;/.bashrc&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>*<span class="s2">&quot;/.bash_profile&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>*<span class="s2">&quot;/.zshrc&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>*<span class="s2">&quot;/.zprofile&quot;</span><span class="o">)</span>
<span class="w">      </span><span class="k">return</span>
<span class="w">    </span><span class="p">;;</span>
<span class="w">    </span>*<span class="o">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">;;</span>
<span class="w">  </span><span class="k">esac</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Outputs the location to NVM depending on:</span>
<span class="c1"># * The availability of $NVM_SOURCE</span>
<span class="c1"># * The presence of $NVM_INSTALL_GITHUB_REPO</span>
<span class="c1"># * The method used (&quot;script&quot; or &quot;git&quot; in the script, defaults to &quot;git&quot;)</span>
<span class="c1"># NVM_SOURCE always takes precedence unless the method is &quot;script-nvm-exec&quot;</span>
<span class="c1">#</span>
nvm_source<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_GITHUB_REPO
<span class="w">  </span><span class="nv">NVM_GITHUB_REPO</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_INSTALL_GITHUB_REPO</span><span class="k">:-</span><span class="nv">nvm</span><span class="p">-sh/nvm</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_GITHUB_REPO</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s1">&#39;nvm-sh/nvm&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="o">{</span><span class="w"> </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>cat<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<span class="s">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
<span class="s">@    WARNING: REMOTE REPO IDENTIFICATION HAS CHANGED!     @</span>
<span class="s">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span>
<span class="s">IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!</span>

<span class="s">The default repository for this install is \`nvm-sh/nvm\`,</span>
<span class="s">but the environment variables \`\$NVM_INSTALL_GITHUB_REPO\` is</span>
<span class="s">currently set to \`${NVM_GITHUB_REPO}\`.</span>

<span class="s">If this is not intentional, interrupt this installation and</span>
<span class="s">verify your environment variables.</span>
<span class="s">EOF</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_VERSION
<span class="w">  </span><span class="nv">NVM_VERSION</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_INSTALL_VERSION</span><span class="k">:-$(</span>nvm_latest_version<span class="k">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_METHOD
<span class="w">  </span><span class="nv">NVM_METHOD</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_SOURCE_URL
<span class="w">  </span><span class="nv">NVM_SOURCE_URL</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$NVM_SOURCE</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;_</span><span class="nv">$NVM_METHOD</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;_script-nvm-exec&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">NVM_SOURCE_URL</span><span class="o">=</span><span class="s2">&quot;https://raw.githubusercontent.com/</span><span class="si">${</span><span class="nv">NVM_GITHUB_REPO</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NVM_VERSION</span><span class="si">}</span><span class="s2">/nvm-exec&quot;</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;_</span><span class="nv">$NVM_METHOD</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;_script-nvm-bash-completion&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nv">NVM_SOURCE_URL</span><span class="o">=</span><span class="s2">&quot;https://raw.githubusercontent.com/</span><span class="si">${</span><span class="nv">NVM_GITHUB_REPO</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NVM_VERSION</span><span class="si">}</span><span class="s2">/bash_completion&quot;</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_SOURCE_URL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;_</span><span class="nv">$NVM_METHOD</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;_script&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">NVM_SOURCE_URL</span><span class="o">=</span><span class="s2">&quot;https://raw.githubusercontent.com/</span><span class="si">${</span><span class="nv">NVM_GITHUB_REPO</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">NVM_VERSION</span><span class="si">}</span><span class="s2">/nvm.sh&quot;</span>
<span class="w">    </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;_</span><span class="nv">$NVM_METHOD</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;_git&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_METHOD</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">NVM_SOURCE_URL</span><span class="o">=</span><span class="s2">&quot;https://github.com/</span><span class="si">${</span><span class="nv">NVM_GITHUB_REPO</span><span class="si">}</span><span class="s2">.git&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Unexpected value \&quot;</span><span class="nv">$NVM_METHOD</span><span class="s2">\&quot; for \$NVM_METHOD&quot;</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_SOURCE_URL</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Node.js version to install</span>
<span class="c1">#</span>
nvm_node_version<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NODE_VERSION</span><span class="s2">&quot;</span>
<span class="o">}</span>

nvm_download<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span>nvm_has<span class="w"> </span><span class="s2">&quot;curl&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>curl<span class="w"> </span>--fail<span class="w"> </span>--compressed<span class="w"> </span>-q<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span>nvm_has<span class="w"> </span><span class="s2">&quot;wget&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># Emulate curl with wget</span>
<span class="w">    </span><span class="nv">ARGS</span><span class="o">=</span><span class="k">$(</span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s/--progress-bar /--progress=bar /&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/--compressed //&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/--fail //&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-L //&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-I /--server-response /&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-s /-q /&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-sS /-nv /&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-o /-O /&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">                            </span>-e<span class="w"> </span><span class="s1">&#39;s/-C - /-c /&#39;</span><span class="k">)</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2086</span>
<span class="w">    </span><span class="nb">eval</span><span class="w"> </span>wget<span class="w"> </span><span class="nv">$ARGS</span>
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

install_nvm_from_git<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>INSTALL_DIR
<span class="w">  </span><span class="nv">INSTALL_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_install_dir<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_VERSION
<span class="w">  </span><span class="nv">NVM_VERSION</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_INSTALL_VERSION</span><span class="k">:-$(</span>nvm_latest_version<span class="k">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_INSTALL_VERSION</span><span class="k">:-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># Check if version is an existing ref</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>ls-remote<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="w"> </span><span class="s2">&quot;git&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_VERSION</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>nvm_grep<span class="w"> </span>-q<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_VERSION</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>:
<span class="w">    </span><span class="c1"># Check if version is an existing changeset</span>
<span class="w">    </span><span class="k">elif</span><span class="w"> </span>!<span class="w"> </span>nvm_download<span class="w"> </span>-o<span class="w"> </span>/dev/null<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="w"> </span><span class="s2">&quot;script-nvm-exec&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to find &#39;</span><span class="nv">$NVM_VERSION</span><span class="s2">&#39; version.&quot;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>fetch_error
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/.git&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># Updating repo</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; nvm is already installed in </span><span class="nv">$INSTALL_DIR</span><span class="s2">, trying to update using git&quot;</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;\r=&gt; &#39;</span>
<span class="w">    </span><span class="nv">fetch_error</span><span class="o">=</span><span class="s2">&quot;Failed to update nvm with </span><span class="nv">$NVM_VERSION</span><span class="s2">, run &#39;git fetch&#39; in </span><span class="nv">$INSTALL_DIR</span><span class="s2"> yourself.&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nv">fetch_error</span><span class="o">=</span><span class="s2">&quot;Failed to fetch origin with </span><span class="nv">$NVM_VERSION</span><span class="s2">. Please report this!&quot;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Downloading nvm from git to &#39;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&#39;&quot;</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s1">&#39;\r=&gt; &#39;</span>
<span class="w">    </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>ls<span class="w"> </span>-A<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="c1"># Initializing repo</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>init<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;Failed to initialize nvm repo. Please report this!&#39;</span>
<span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">/.git&quot;</span><span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>origin<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span>&gt;<span class="w"> </span>/dev/null<span class="w"> </span><span class="se">\</span>
<span class="w">        </span><span class="o">||</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">/.git&quot;</span><span class="w"> </span>remote<span class="w"> </span>set-url<span class="w"> </span>origin<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;Failed to add remote &quot;origin&quot; (or set the URL). Please report this!&#39;</span>
<span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="c1"># Cloning repo</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>--depth<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">INSTALL_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;Failed to clone nvm repo. Please report this!&#39;</span>
<span class="w">        </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<span class="w">      </span><span class="o">}</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="c1"># Try to fetch tag</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>fetch<span class="w"> </span>origin<span class="w"> </span>tag<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_VERSION</span><span class="s2">&quot;</span><span class="w"> </span>
--depth<span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>:
<span class="w">  </span><span class="c1"># Fetch given version</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>fetch<span class="w"> </span>origin<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_VERSION</span><span class="s2">&quot;</span><span class="w"> </span>
--depth<span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$fetch_error</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>-c<span class="w"> </span>advice.detachedHead<span class="o">=</span><span class="nb">false</span><span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>checkout<span class="w"> </span>
-f<span class="w"> </span>--quiet<span class="w"> </span>FETCH_HEAD<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to checkout the given version </span><span class="nv">$NVM_VERSION</span><span class="s2">. Please report this!&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<span class="w">  </span><span class="o">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>show-ref<span class="w"> </span>
refs/heads/master<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--no-pager<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>branch<span class="w"> </span>--quiet<span class="w"> </span>
<span class="m">2</span>&gt;/dev/null<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--no-pager<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>branch<span class="w"> </span>--quiet<span class="w"> </span>-D<span class="w"> </span>
master<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Your version of git is out of date. Please update it!&quot;</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--no-pager<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>branch<span class="w"> </span>-D<span class="w"> </span>master<span class="w"> </span>
&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Compressing and cleaning up git repository&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>reflog<span class="w"> </span>expire<span class="w"> </span>--expire<span class="o">=</span>now<span class="w"> </span>--all<span class="p">;</span><span class="w"> </span>
<span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Your version of git is out of date. Please update it!&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>git<span class="w"> </span>--git-dir<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>/.git<span class="w"> </span>--work-tree<span class="o">=</span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span><span class="w"> </span>gc<span class="w"> </span>--auto<span class="w"> </span>--aggressive<span class="w"> </span>
--prune<span class="o">=</span>now<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Your version of git is out of date. Please update it!&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">return</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Automatically install Node.js</span>
<span class="c1">#</span>
nvm_install_node<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NODE_VERSION_LOCAL
<span class="w">  </span><span class="nv">NODE_VERSION_LOCAL</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_node_version<span class="k">)</span><span class="s2">&quot;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Installing Node.js version </span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2">&quot;</span>
<span class="w">  </span>nvm<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>CURRENT_NVM_NODE

<span class="w">  </span><span class="nv">CURRENT_NVM_NODE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_version<span class="w"> </span>current<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_version<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$CURRENT_NVM_NODE</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Node.js version </span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2"> has been successfully installed&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to install Node.js </span><span class="nv">$NODE_VERSION_LOCAL</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

install_nvm_as_script<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>INSTALL_DIR
<span class="w">  </span><span class="nv">INSTALL_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_install_dir<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_SOURCE_LOCAL
<span class="w">  </span><span class="nv">NVM_SOURCE_LOCAL</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="w"> </span>script<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_EXEC_SOURCE
<span class="w">  </span><span class="nv">NVM_EXEC_SOURCE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="w"> </span>script-nvm-exec<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_BASH_COMPLETION_SOURCE
<span class="w">  </span><span class="nv">NVM_BASH_COMPLETION_SOURCE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_source<span class="w"> </span>script-nvm-bash-completion<span class="k">)</span><span class="s2">&quot;</span>

<span class="w">  </span><span class="c1"># Downloading to $INSTALL_DIR</span>
<span class="w">  </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/nvm.sh&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; nvm is already installed in </span><span class="nv">$INSTALL_DIR</span><span class="s2">, trying to update the script&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Downloading nvm as script to &#39;</span><span class="nv">$INSTALL_DIR</span><span class="s2">&#39;&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span>nvm_download<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_SOURCE_LOCAL</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/nvm.sh&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to download &#39;</span><span class="nv">$NVM_SOURCE_LOCAL</span><span class="s2">&#39;&quot;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="o">}</span><span class="w"> </span><span class="p">&amp;</span>
<span class="w">  </span>nvm_download<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_EXEC_SOURCE</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/nvm-exec&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to download &#39;</span><span class="nv">$NVM_EXEC_SOURCE</span><span class="s2">&#39;&quot;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">2</span>
<span class="w">  </span><span class="o">}</span><span class="w"> </span><span class="p">&amp;</span>
<span class="w">  </span>nvm_download<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_BASH_COMPLETION_SOURCE</span><span class="s2">&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/bash_completion&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to download &#39;</span><span class="nv">$NVM_BASH_COMPLETION_SOURCE</span><span class="s2">&#39;&quot;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">2</span>
<span class="w">  </span><span class="o">}</span><span class="w"> </span><span class="p">&amp;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span>job<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span><span class="nb">jobs</span><span class="w"> </span>-p<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>sort<span class="k">)</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="nb">wait</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$job</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nv">$?</span>
<span class="w">  </span><span class="k">done</span>
<span class="w">  </span>chmod<span class="w"> </span>a+x<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/nvm-exec&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Failed to mark &#39;</span><span class="nv">$INSTALL_DIR</span><span class="s2">/nvm-exec&#39; as executable&quot;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="o">}</span>
<span class="o">}</span>

nvm_try_profile<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Detect profile file if not specified as environment variable</span>
<span class="c1"># (eg: PROFILE=~/.myprofile)</span>
<span class="c1"># The echo&#39;ed path is guaranteed to be an existing file</span>
<span class="c1"># Otherwise, an empty string is returned</span>
<span class="c1">#</span>
nvm_detect_profile<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/dev/null&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># the user has specifically requested NOT to have nvm touch their profile</span>
<span class="w">    </span><span class="k">return</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROFILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROFILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROFILE</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">return</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>DETECTED_PROFILE
<span class="w">  </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s1">&#39;&#39;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SHELL</span><span class="p">#*bash</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SHELL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bashrc&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bashrc&quot;</span>
<span class="w">    </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bash_profile&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.bash_profile&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SHELL</span><span class="p">#*zsh</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$SHELL</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.zshrc&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.zshrc&quot;</span>
<span class="w">    </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.zprofile&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOME</span><span class="s2">/.zprofile&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DETECTED_PROFILE</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>EACH_PROFILE<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;.profile&quot;</span><span class="w"> </span><span class="s2">&quot;.bashrc&quot;</span><span class="w"> </span><span class="s2">&quot;.bash_profile&quot;</span><span class="w"> </span><span class="s2">&quot;.zprofile&quot;</span><span class="w"> </span><span class="s2">&quot;.zshrc&quot;</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="nv">DETECTED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_try_profile<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">EACH_PROFILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="k">break</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DETECTED_PROFILE</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$DETECTED_PROFILE</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Check whether the user has any globally-installed npm modules in their system</span>
<span class="c1"># Node, and warn them if so.</span>
<span class="c1">#</span>
nvm_check_global_modules<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NPM_COMMAND
<span class="w">  </span><span class="nv">NPM_COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">command</span><span class="w"> </span>-v<span class="w"> </span>npm<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NPM_COMMAND</span><span class="p">%%</span><span class="s2">&quot;</span><span class="nv">$NVM_DIR</span><span class="s2">&quot;</span><span class="p">/*</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NPM_VERSION
<span class="w">  </span><span class="nv">NPM_VERSION</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>npm<span class="w"> </span>--version<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nv">NPM_VERSION</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NPM_VERSION</span><span class="k">:-</span><span class="p">-1</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NPM_VERSION</span><span class="p">%%[!-0-9]*</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="m">0</span>

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NPM_GLOBAL_MODULES
<span class="w">  </span><span class="nv">NPM_GLOBAL_MODULES</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>
<span class="w">    </span>npm<span class="w"> </span>list<span class="w"> </span>-g<span class="w"> </span>--depth<span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="p">|</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/ npm@/d&#39;</span><span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;/ (empty)$/d&#39;</span>
<span class="w">  </span><span class="k">)</span><span class="s2">&quot;</span>

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>MODULE_COUNT
<span class="w">  </span><span class="nv">MODULE_COUNT</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span>%s<span class="se">\\</span>n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NPM_GLOBAL_MODULES</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span>sed<span class="w"> </span>-ne<span class="w"> </span><span class="s1">&#39;1!p&#39;</span><span class="w"> </span><span class="p">|</span><span class="w">                     </span><span class="c1"># Remove the first line</span>
<span class="w">    </span>wc<span class="w"> </span>-l<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>tr<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w">                   </span><span class="c1"># Count entries</span>
<span class="w">  </span><span class="k">)</span><span class="s2">&quot;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MODULE_COUNT</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; You currently have modules installed globally with `npm`. These will no&#39;</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; longer be linked to the active version of Node when you install a new node&#39;</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; with `nvm`; and they may (depending on how you construct your `$PATH`)&#39;</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; override the binaries of modules installed with `nvm`:&#39;</span>
<span class="w">    </span>nvm_echo

<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span>%s<span class="se">\\</span>n<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NPM_GLOBAL_MODULES</span><span class="s2">&quot;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; If you wish to uninstall them at a later point (or re-install them under your&#39;</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;=&gt; `nvm` node installs), you can remove them from the system Node as follows:&#39;</span>
<span class="w">    </span>nvm_echo
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;     $ nvm use system&#39;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s1">&#39;     $ npm uninstall -g a_module&#39;</span>
<span class="w">    </span>nvm_echo
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

nvm_do_install<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>!<span class="w"> </span><span class="o">[</span><span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;File \&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">\&quot; has the same name as installation directory.&quot;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_default_install_dir<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>mkdir<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;You have \$NVM_DIR set to \&quot;</span><span class="si">${</span><span class="nv">NVM_DIR</span><span class="si">}</span><span class="s2">\&quot;, but that directory does not exist. Check your </span>
<span class="s2">profile files and environment.&quot;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="c1"># Disable the optional which check, https://www.shellcheck.net/wiki/SC2230</span>
<span class="w">  </span><span class="c1"># shellcheck disable=SC2230</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span>nvm_has<span class="w"> </span>xcode-select<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>xcode-select<span class="w"> </span>-p<span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$?</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>which<span class="w"> </span>
git<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/bin/git&#39;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>which<span class="w"> </span>curl<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/bin/curl&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;You may be on a Mac, and need to install the Xcode Command Line Developer Tools.&#39;</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;If so, run `xcode-select --install` and try again. If not, please report this!&#39;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">METHOD</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="c1"># Autodetect install method</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>nvm_has<span class="w"> </span>git<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>install_nvm_from_git
<span class="w">    </span><span class="k">elif</span><span class="w"> </span>nvm_has<span class="w"> </span>curl<span class="w"> </span><span class="o">||</span><span class="w"> </span>nvm_has<span class="w"> </span>wget<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>install_nvm_as_script
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s1">&#39;You need git, curl, or wget to install nvm&#39;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">METHOD</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;git&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>nvm_has<span class="w"> </span>git<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;You need git to install nvm&quot;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span>install_nvm_from_git
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">METHOD</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;script&#39;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span>nvm_has<span class="w"> </span>curl<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>!<span class="w"> </span>nvm_has<span class="w"> </span>wget<span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;You need curl or wget to install nvm&quot;</span>
<span class="w">      </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span>install_nvm_as_script
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>nvm_echo<span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;The environment variable \$METHOD is set to \&quot;</span><span class="si">${</span><span class="nv">METHOD</span><span class="si">}</span><span class="s2">\&quot;, which is not recognized as a </span>
<span class="s2">valid installation method.&quot;</span>
<span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span>nvm_echo

<span class="w">  </span><span class="nb">local</span><span class="w"> </span>NVM_PROFILE
<span class="w">  </span><span class="nv">NVM_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_detect_profile<span class="k">)</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="nb">local</span><span class="w"> </span>PROFILE_INSTALL_DIR
<span class="w">  </span><span class="nv">PROFILE_INSTALL_DIR</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>nvm_install_dir<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="nb">command</span><span class="w"> </span>sed<span class="w"> </span><span class="s2">&quot;s:^</span><span class="nv">$HOME</span><span class="s2">:\$HOME:&quot;</span><span class="k">)</span><span class="s2">&quot;</span>

<span class="w">  </span><span class="nv">SOURCE_STR</span><span class="o">=</span><span class="s2">&quot;\\nexport NVM_DIR=\&quot;</span><span class="si">${</span><span class="nv">PROFILE_INSTALL_DIR</span><span class="si">}</span><span class="s2">\&quot;\\n[ -s \&quot;\$NVM_DIR/nvm.sh\&quot; ] &amp;&amp; \\. </span>
<span class="s2">\&quot;\$NVM_DIR/nvm.sh\&quot;  # This loads nvm\\n&quot;</span>

<span class="w">  </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">  </span><span class="nv">COMPLETION_STR</span><span class="o">=</span><span class="s1">&#39;[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm </span>
<span class="s1">bash_completion\n&#39;</span>
<span class="w">  </span><span class="nv">BASH_OR_ZSH</span><span class="o">=</span><span class="nb">false</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">local</span><span class="w"> </span>TRIED_PROFILE
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROFILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">TRIED_PROFILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="si">}</span><span class="s2"> (as defined in \$PROFILE), &quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Profile not found. Tried </span><span class="si">${</span><span class="nv">TRIED_PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">~/.bashrc, ~/.bash_profile, ~/.zprofile, ~/.zshrc, </span>
<span class="s2">and ~/.profile.&quot;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Create one of them and run this script again&quot;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;   OR&quot;</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Append the following lines to the correct file yourself:&quot;</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SOURCE_STR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span>nvm_echo
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>nvm_profile_is_bash_or_zsh<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span><span class="nv">BASH_OR_ZSH</span><span class="o">=</span><span class="nb">true</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>grep<span class="w"> </span>-qc<span class="w"> </span><span class="s1">&#39;/nvm.sh&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Appending nvm source string to </span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SOURCE_STR</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; nvm source string already in </span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="c1"># shellcheck disable=SC2016</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="si">${</span><span class="nv">BASH_OR_ZSH</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>!<span class="w"> </span><span class="nb">command</span><span class="w"> </span>grep<span class="w"> </span>-qc<span class="w"> </span><span class="s1">&#39;$NVM_DIR/bash_completion&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">      </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Appending bash_completion source string to </span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span>
<span class="w">      </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$COMPLETION_STR</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$NVM_PROFILE</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; bash_completion source string already in </span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="si">${</span><span class="nv">BASH_OR_ZSH</span><span class="si">}</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">NVM_PROFILE</span><span class="p">-</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Please also append the following lines to the if you are using bash/zsh shell:&quot;</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">COMPLETION_STR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="c1"># Source nvm</span>
<span class="w">  </span><span class="c1"># shellcheck source=/dev/null</span>
<span class="w">  </span><span class="se">\.</span><span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>nvm_install_dir<span class="k">)</span><span class="s2">/nvm.sh&quot;</span>

<span class="w">  </span>nvm_check_global_modules

<span class="w">  </span>nvm_install_node

<span class="w">  </span>nvm_reset

<span class="w">  </span>nvm_echo<span class="w"> </span><span class="s2">&quot;=&gt; Close and reopen your terminal to start using nvm or run the following to use it now:&quot;</span>
<span class="w">  </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SOURCE_STR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="si">${</span><span class="nv">BASH_OR_ZSH</span><span class="si">}</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">command</span><span class="w"> </span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">COMPLETION_STR</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="o">}</span>

<span class="c1">#</span>
<span class="c1"># Unsets the various functions defined</span>
<span class="c1"># during the execution of the install script</span>
<span class="c1">#</span>
nvm_reset<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nb">unset</span><span class="w"> </span>-f<span class="w"> </span>nvm_has<span class="w"> </span>nvm_install_dir<span class="w"> </span>nvm_latest_version<span class="w"> </span>nvm_profile_is_bash_or_zsh<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>nvm_source<span class="w"> </span>nvm_node_version<span class="w"> </span>nvm_download<span class="w"> </span>install_nvm_from_git<span class="w"> </span>nvm_install_node<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>install_nvm_as_script<span class="w"> </span>nvm_try_profile<span class="w"> </span>nvm_detect_profile<span class="w"> </span>nvm_check_global_modules<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>nvm_do_install<span class="w"> </span>nvm_reset<span class="w"> </span>nvm_default_install_dir<span class="w"> </span>nvm_grep
<span class="o">}</span>

<span class="o">[</span><span class="w"> </span><span class="s2">&quot;_</span><span class="nv">$NVM_ENV</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;_testing&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">||</span><span class="w"> </span>nvm_do_install

<span class="o">}</span><span class="w"> </span><span class="c1"># this ensures the entire script is downloaded #</span>
</code></pre></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 Mkdox curlpipebash &bull; pforret
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "header.autohide", "navigation.instant", "navigation.integrate", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.highlight", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>